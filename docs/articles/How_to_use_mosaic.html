<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How to use vcd::mosaic • futools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to use vcd::mosaic">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">futools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/How_to_use_mosaic.html">How to use vcd::mosaic</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>How to use vcd::mosaic</h1>
            
      

      <div class="d-none name"><code>How_to_use_mosaic.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://419kfj.github.io/futools/">futools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Attaching core tidyverse packages</span> ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr    </span> 1.1.4     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr    </span> 2.1.5</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats  </span> 1.0.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr  </span> 1.5.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2  </span> 3.5.2     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble   </span> 3.2.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">lubridate</span> 1.9.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr    </span> 1.3.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr    </span> 1.0.4     </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use the conflicted package (<span style="color: #0000BB; font-style: italic;">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">vcd</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: grid</span></span></code></pre></div>
<div class="section level2">
<h2 id="本稿の目的">本稿の目的<a class="anchor" aria-label="anchor" href="#%E6%9C%AC%E7%A8%BF%E3%81%AE%E7%9B%AE%E7%9A%84"></a>
</h2>
<ul>
<li>vcd::mosaicを使う際のtipsを整理する</li>
</ul>
</div>
<div class="section level2">
<h2 id="vcdmosaic-とはなにか">vcd::mosaic とはなにか<a class="anchor" aria-label="anchor" href="#vcdmosaic-%E3%81%A8%E3%81%AF%E3%81%AA%E3%81%AB%E3%81%8B"></a>
</h2>
<div class="section level3">
<h3 id="mosaic-plotとはなにか">mosaic plotとはなにか<a class="anchor" aria-label="anchor" href="#mosaic-plot%E3%81%A8%E3%81%AF%E3%81%AA%E3%81%AB%E3%81%8B"></a>
</h3>
<p>mosaic
plotは、帯棒グラフの拡張版と理解できる。帯棒グラフでは、nの値がことなる「棒」であっても、棒の高さが同じに表示されるために、全体の分布の中での評価をあやまることがある。mosaic
plotは、セルの面積で度数を表現するので、n=
がグラフ表現の中に組み込まれた「帯棒グラフ」を考えることできる。</p>
<p>CRANに登録されているpackgeのDESCRIPTION</p>
<p><strong>Description</strong> Visualization techniques, data sets,
summary and inference procedures aimed particularly at categorical data.
Special emphasis is given to highly extensible grid graphics. The
package was package was originally inspired by the book
<code>Visualizing Categorical Data'' by Michael Friendly and is now the main support package for a new book,</code>Discrete
Data Analysis with R’’ by Michael Friendly and David Meyer (2015).</p>
</div>
<div class="section level3">
<h3 id="basemosaicplot-との違いはなにか">base::mosaicplot との違いはなにか<a class="anchor" aria-label="anchor" href="#basemosaicplot-%E3%81%A8%E3%81%AE%E9%81%95%E3%81%84%E3%81%AF%E3%81%AA%E3%81%AB%E3%81%8B"></a>
</h3>
<p>baseにもmosaicplotがある。しかし、入力された表<code>table</code>の行と列の位置が逆になっている。加えて、vcd::mosaicには、以下に述べる機能的な特徴がある。</p>
</div>
<div class="section level3">
<h3 id="ggplot2のggmosaicとの違いはなにか">ggplot2のggmosaicとの違いはなにか<a class="anchor" aria-label="anchor" href="#ggplot2%E3%81%AEggmosaic%E3%81%A8%E3%81%AE%E9%81%95%E3%81%84%E3%81%AF%E3%81%AA%E3%81%AB%E3%81%8B"></a>
</h3>
<p>ggmosaicは、表のグラフ表示をggplotベースで実現したものである。</p>
</div>
<div class="section level3">
<h3 id="vcdmosaic-の表の表示以上の機能">vcd::mosaic の「表の表示」以上の機能<a class="anchor" aria-label="anchor" href="#vcdmosaic-%E3%81%AE%E8%A1%A8%E3%81%AE%E8%A1%A8%E7%A4%BA%E4%BB%A5%E4%B8%8A%E3%81%AE%E6%A9%9F%E8%83%BD"></a>
</h3>
<ul>
<li>残差表示</li>
<li>対数線形モデルでのモデルごとのfittingの表示</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="vcdmosaicの使い方">vcd::mosaicの使い方<a class="anchor" aria-label="anchor" href="#vcdmosaic%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9"></a>
</h2>
<div class="section level3">
<h3 id="install">install<a class="anchor" aria-label="anchor" href="#install"></a>
</h3>
<p>Package
タブで<code>vcd</code>のインストールを行い、.Rや.Rmdでは、library(vcd)を実行。</p>
<p>関連するものとして、<code>vcdExtra</code>、そして、必要であれば、日本語データや、設定パラメータを用意してある<code>futools</code>もインストールしておく。</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"HairEyeColor"</span><span class="op">)</span> <span class="co"># 髪の色と目の色の対応関係を集計した３元クロス表</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">HairEyeColor</span></span>
<span><span class="co">#&gt; , , Sex = Male</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;        Eye</span></span>
<span><span class="co">#&gt; Hair    Brown Blue Hazel Green</span></span>
<span><span class="co">#&gt;   Black    32   11    10     3</span></span>
<span><span class="co">#&gt;   Brown    53   50    25    15</span></span>
<span><span class="co">#&gt;   Red      10   10     7     7</span></span>
<span><span class="co">#&gt;   Blond     3   30     5     8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; , , Sex = Female</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;        Eye</span></span>
<span><span class="co">#&gt; Hair    Brown Blue Hazel Green</span></span>
<span><span class="co">#&gt;   Black    36    9     5     2</span></span>
<span><span class="co">#&gt;   Brown    66   34    29    14</span></span>
<span><span class="co">#&gt;   Red      16    7     7     7</span></span>
<span><span class="co">#&gt;   Blond     4   64     5     8</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/ftable.html" class="external-link">ftable</a></span><span class="op">(</span><span class="va">HairEyeColor</span>,row.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sex"</span>,<span class="st">"Hair"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;              Eye Brown Blue Hazel Green</span></span>
<span><span class="co">#&gt; Sex    Hair                            </span></span>
<span><span class="co">#&gt; Male   Black        32   11    10     3</span></span>
<span><span class="co">#&gt;        Brown        53   50    25    15</span></span>
<span><span class="co">#&gt;        Red          10   10     7     7</span></span>
<span><span class="co">#&gt;        Blond         3   30     5     8</span></span>
<span><span class="co">#&gt; Female Black        36    9     5     2</span></span>
<span><span class="co">#&gt;        Brown        66   34    29    14</span></span>
<span><span class="co">#&gt;        Red          16    7     7     7</span></span>
<span><span class="co">#&gt;        Blond         4   64     5     8</span></span></code></pre></div>
<ul>
<li>futooltsで提供している、<code>HairEyeColor_jp</code>、<code>HairEyeColor_kr</code>は、それぞれ表のカテゴリラベルを日本語、韓国語にしたものである。</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="vcdmosaicの基本形">vcd::mosaicの基本形<a class="anchor" aria-label="anchor" href="#vcdmosaic%E3%81%AE%E5%9F%BA%E6%9C%AC%E5%BD%A2"></a>
</h2>
<div class="section level3">
<h3 id="haireyecolor-を表示する">HairEyeColor を表示する<a class="anchor" aria-label="anchor" href="#haireyecolor-%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">HairEyeColor</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="How_to_use_mosaic_files/figure-html/unnamed-chunk-5-1.png" width="600"></p>
</div>
<div class="section level3">
<h3 id="標準化残差を表示する">標準化残差を表示する<a class="anchor" aria-label="anchor" href="#%E6%A8%99%E6%BA%96%E5%8C%96%E6%AE%8B%E5%B7%AE%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">HairEyeColor</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></span><span class="op">(</span>shade <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="How_to_use_mosaic_files/figure-html/unnamed-chunk-6-1.png" width="600"></p>
</div>
<div class="section level3">
<h3 id="性別のラベルが重なってしまっているので90度回転する">「性別」のラベルが重なってしまっているので、90度回転する<a class="anchor" aria-label="anchor" href="#%E6%80%A7%E5%88%A5%E3%81%AE%E3%83%A9%E3%83%99%E3%83%AB%E3%81%8C%E9%87%8D%E3%81%AA%E3%81%A3%E3%81%A6%E3%81%97%E3%81%BE%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%A790%E5%BA%A6%E5%9B%9E%E8%BB%A2%E3%81%99%E3%82%8B"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">HairEyeColor</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></span><span class="op">(</span>rot_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>left <span class="op">=</span> <span class="fl">0</span>, top <span class="op">=</span> <span class="fl">0</span>, right <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,<span class="op">)</span></span></code></pre></div>
<p><img src="How_to_use_mosaic_files/figure-html/unnamed-chunk-7-1.png" width="600"></p>
<ul>
<li>maegin設定はのちほど。</li>
</ul>
<p>##　性別ごとに髪の色と目の色の対応を表示する</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">HairEyeColor</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></span><span class="op">(</span><span class="va">Eye</span> <span class="op">~</span> <span class="va">Sex</span> <span class="op">+</span> <span class="va">Hair</span>,<span class="va">.</span>,</span>
<span>                        rot_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>left <span class="op">=</span> <span class="fl">0</span>, top <span class="op">=</span> <span class="fl">0</span>, right <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="How_to_use_mosaic_files/figure-html/unnamed-chunk-8-1.png" width="600"></p>
</div>
<div class="section level3">
<h3 id="section"></h3>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
